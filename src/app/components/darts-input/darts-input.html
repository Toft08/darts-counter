<div class="darts-input-container">
  <!-- Dart by Dart Mode with Button Layout -->
  <div *ngIf="game.inputMode === 'dart-by-dart'" class="dart-button-layout">
    <!-- Unified Button Grid -->
    <div class="unified-grid">
      <!-- Row 1: SB, 20, 19, 18, 17 -->
      <button type="button" class="grid-btn bull-btn" [class.selected]="selectedMultiplier !== 1" (click)="selectNumber(25)">SB</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(20)">20</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(19)">19</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(18)">18</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(17)">17</button>
      
      <!-- Row 2: T, 16, 15, 14, 13 -->
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier === 3" (click)="selectMultiplier(3)">T</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(16)">16</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(15)">15</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(14)">14</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(13)">13</button>
      
      
      <!-- Row 3: D, 12, 11, 10, 9 -->
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier === 2" (click)="selectMultiplier(2)">D</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(12)">12</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(11)">11</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(10)">10</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(9)">9</button>
      
      <!-- Row 4: Miss, 8, 7, 6, 5 -->
      <button type="button" class="grid-btn miss-btn" (click)="selectNumber(0)">Miss</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(8)">8</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(7)">7</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(6)">6</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(5)">5</button>
      
      <!-- Row 5: Undo, 4, 3, 2, 1 -->
      <button type="button" class="grid-btn undo-btn" [disabled]="game.throwHistory.length === 0" (click)="undoLastDart()">Undo</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(4)">4</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(3)">3</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(2)">2</button>
      <button type="button" class="grid-btn" [class.selected]="selectedMultiplier !== 1 && selectedMultiplier !== 25 && selectedMultiplier !== 50" (click)="selectNumber(1)">1</button>
    </div>
  </div>
  
  <!-- Per Visit Mode -->
  <div *ngIf="game.inputMode === 'per-turn'" class="per-visit-mode">
    <div class="numpad">
      <button type="button" class="num-btn" (click)="appendNumber('1')">1</button>
      <button type="button" class="num-btn" (click)="appendNumber('2')">2</button>
      <button type="button" class="num-btn" (click)="appendNumber('3')">3</button>
      
      <button type="button" class="num-btn" (click)="appendNumber('4')">4</button>
      <button type="button" class="num-btn" (click)="appendNumber('5')">5</button>
      <button type="button" class="num-btn" (click)="appendNumber('6')">6</button>
      
      <button type="button" class="num-btn" (click)="appendNumber('7')" [disabled]="showUndoConfirm">7</button>
      <button type="button" class="num-btn" (click)="appendNumber('8')" [disabled]="showUndoConfirm">8</button>
      <button type="button" class="num-btn" (click)="appendNumber('9')" [disabled]="showUndoConfirm">9</button>
      
      <button type="button" class="num-btn" [class.clear-btn]="visitScore" [class.undo-btn]="!visitScore" (click)="clearOrUndo()">
        <span *ngIf="!showUndoConfirm">C/U</span>
        <span *ngIf="showUndoConfirm" style="font-size: 0.8em;">Undo?</span>
      </button>
      <button type="button" class="num-btn" (click)="appendNumber('0')" [disabled]="showUndoConfirm">0</button>
      <button type="button" class="num-btn submit-btn" (click)="submitVisit()" [disabled]="showUndoConfirm">âœ“</button>
    </div>
  </div>
</div>
